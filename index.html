<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel de Gerenciamento de Usuários</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container-fluid">
      <header class="bg-primary text-white py-4 mb-4">
        <div class="container">
          <h1 class="h2 mb-0">
            <i class="bi bi-people-fill me-2"></i>
            Painel de Gerenciamento de Usuários
          </h1>
          <p class="mb-0 opacity-75">
            Sistema de administração de perfis de usuários
          </p>
        </div>
      </header>

      <div class="container">
        <!-- Barra de controles -->
        <div class="row mb-4">
          <div class="col-md-8">
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-search"></i>
              </span>
              <input
                type="text"
                id="searchInput"
                class="form-control"
                placeholder="Pesquisar por nome, email ou cargo..."
              />
            </div>
          </div>
          <div class="col-md-2">
            <select id="statusFilter" class="form-select">
              <option value="">Todos os Status</option>
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
            </select>
          </div>
          <div class="col-md-2">
            <button
              type="button"
              class="btn btn-success w-100"
              data-bs-toggle="modal"
              data-bs-target="#userModal"
              onclick="openAddModal()"
            >
              <i class="bi bi-plus-lg me-1"></i>
              Adicionar Usuário
            </button>
          </div>
        </div>

        <!-- Loading spinner -->
        <div id="loadingSpinner" class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
          </div>
          <p class="mt-2 text-muted">Carregando usuários...</p>
        </div>

        <!-- Tabela de usuários -->
        <div
          id="usersTableContainer"
          class="card shadow-sm"
          style="display: none"
        >
          <div class="card-header bg-light">
            <h5 class="card-title mb-0">
              <i class="bi bi-table me-2"></i>
              Lista de Usuários
              <span id="userCount" class="badge bg-primary ms-2">0</span>
            </h5>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover mb-0">
                <thead class="table-dark">
                  <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Cargo</th>
                    <th>Status</th>
                    <th>Criado em</th>
                    <th class="text-center">Ações</th>
                  </tr>
                </thead>
                <tbody id="usersTableBody">
                  <!-- Usuários serão inseridos aqui via JavaScript -->
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Mensagem quando não há usuários -->
        <div id="noUsersMessage" class="text-center py-5" style="display: none">
          <i class="bi bi-people text-muted" style="font-size: 4rem"></i>
          <h4 class="text-muted mt-3">Nenhum usuário encontrado</h4>
          <p class="text-muted">Clique em "Adicionar Usuário" para começar</p>
        </div>
      </div>
    </div>

    <!-- Modal para Adicionar/Editar Usuário -->
    <div
      class="modal fade"
      id="userModal"
      tabindex="-1"
      aria-labelledby="userModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="userModalLabel">
              <i class="bi bi-person-plus me-2"></i>
              Adicionar Usuário
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="userForm" novalidate>
              <input type="hidden" id="userId" />

              <div class="mb-3">
                <label for="userName" class="form-label">Nome Completo *</label>
                <input
                  type="text"
                  class="form-control"
                  id="userName"
                  required
                />
                <div class="invalid-feedback">
                  Por favor, informe o nome completo.
                </div>
              </div>

              <div class="mb-3">
                <label for="userEmail" class="form-label">Email *</label>
                <input
                  type="email"
                  class="form-control"
                  id="userEmail"
                  required
                />
                <div class="invalid-feedback">
                  Por favor, informe um email válido.
                </div>
              </div>

              <div class="mb-3">
                <label for="userCargo" class="form-label">Cargo *</label>
                <select class="form-select" id="userCargo" required>
                  <option value="">Selecione um cargo</option>
                  <option value="Gerente de Projetos">
                    Gerente de Projetos
                  </option>
                  <option value="Desenvolvedor Frontend">
                    Desenvolvedor Frontend
                  </option>
                  <option value="Desenvolvedor Backend">
                    Desenvolvedor Backend
                  </option>
                  <option value="Designer UX/UI">Designer UX/UI</option>
                  <option value="Analista de Sistemas">
                    Analista de Sistemas
                  </option>
                  <option value="DevOps Engineer">DevOps Engineer</option>
                  <option value="Product Owner">Product Owner</option>
                  <option value="Scrum Master">Scrum Master</option>
                  <option value="Analista de QA">Analista de QA</option>
                  <option value="Administrador de Sistemas">
                    Administrador de Sistemas
                  </option>
                </select>
                <div class="invalid-feedback">
                  Por favor, selecione um cargo.
                </div>
              </div>

              <div class="mb-3">
                <label for="userStatus" class="form-label">Status *</label>
                <select class="form-select" id="userStatus" required>
                  <option value="">Selecione o status</option>
                  <option value="ativo">Ativo</option>
                  <option value="inativo">Inativo</option>
                </select>
                <div class="invalid-feedback">
                  Por favor, selecione o status.
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              <i class="bi bi-x-lg me-1"></i>
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              id="saveUserBtn"
              onclick="saveUser()"
            >
              <i class="bi bi-check-lg me-1"></i>
              Salvar Usuário
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Confirmação de Exclusão -->
    <div
      class="modal fade"
      id="deleteModal"
      tabindex="-1"
      aria-labelledby="deleteModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title" id="deleteModalLabel">
              <i class="bi bi-exclamation-triangle me-2"></i>
              Confirmar Exclusão
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p>Tem certeza que deseja excluir este usuário?</p>
            <p class="text-muted mb-0">Esta ação não pode ser desfeita.</p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              <i class="bi bi-x-lg me-1"></i>
              Cancelar
            </button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
              <i class="bi bi-trash me-1"></i>
              Excluir
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast para notificações -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div
        id="notificationToast"
        class="toast"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="toast-header">
          <i
            id="toastIcon"
            class="bi bi-check-circle-fill text-success me-2"
          ></i>
          <strong class="me-auto" id="toastTitle">Sucesso</strong>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body" id="toastMessage">
          Operação realizada com sucesso!
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- API Configuration -->
    <script src="config.js"></script>
    <!-- Custom JavaScript -->
    <script src="script.js"></script>
  </body>
</html>
